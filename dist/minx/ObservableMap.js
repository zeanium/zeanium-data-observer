!function(t){t.Class("zn.data.ObservableMap",t.data.Map,{mixins:[t.data.Observable],events:["change"],methods:{set:function(t,e){if(this.has(t))return this.super(t);var i=this._map,a={key:t,value:e};if(t in i){var n=i[t];i[t]=a,this.fire("change",{action:"replace",oldItem:n,newItem:a})}else i[t]=a,this.notify("count"),this.fire("change",{action:"add",items:[a]})},remove:function(t){var e=this._map;if(t in e){var i=e[t];delete e[t],this.notify("count"),this.fire("change",{action:"remove",items:[i]})}},clear:function(){this.toArray();return this.super(),this.notify("count"),this.fire("change",{action:"clear",items:this.toArray()}),this}}})}(zn);