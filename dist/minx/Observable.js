!function(n){var o=n.Class("zn.data.Observable",{properties:{},methods:{init:{auto:!0,value:function(){this.__watchers__={}}},dispose:function(){n.each(this.__watchers__,function(t,i){this.__unbind(i,this.get(i))},this),this.__watchers__=null},watch:function(t,i,h){return("*"===t?this.constructor._properties_:n.is(t,"array")?t:[t]).forEach(function(t){this.__watch(t,i,h)},this),this},unwatch:function(t,i,h){return("*"===t?this.constructor._properties_:n.is(t,"array")?t:[t]).forEach(function(t){this.__unwatch(t,i,h)},this),this},notify:function(t){var i="*"===t?Object.keys(this.__watchers__):n.is(t,"array")?t:[t];return n.each(i,function(t){this.__notify(t)},this),this},__watch:function(t,i,h){var n=t.indexOf("."),a=t,e="",s=this.__watchers__;if(0<=n){a=t.slice(0,n),e=t.slice(n+1);var c=this.get(a);c&&c.watch&&c.watch(e,i,h)}(s[a]=s[a]||[]).push({handler:i,context:h,fullPath:t,subPath:e});var r=this.member(a);if(r&&"property"===r.type&&!r.meta.watched){var _=r.getter,u=r.setter;o.defineProperty(a,{get:function(t){return _.call(this,t)},set:function(t,i){var h=_.call(this);(h!==t||i&&i.force)&&(this.__unbind(a,h),!1!==u.call(this,t,i)&&(this.__bind(a,t),this.notify(a)))},watched:!0},this)}},__unwatch:function(t,i,h){var n=t.indexOf("."),a=t,e="",s=this.__watchers__;if(0<=n){a=t.slice(0,n),e=t.slice(n+1);var c=this.get(a);c&&c.unwatch&&c.unwatch(e,i,h)}var r,_=s[a];if(!_)return!1;if(i){for(var u=0,o=_.length;u<o;u++)if((r=_[u]).handler===i&&r.context===h){_.splice(u,1);break}}else _.length=0},__bind:function(t,i){i&&i.watch&&n.each(this.__watchers__[t],function(t){t.subPath&&i.watch(t.subPath,t.handler,t.context)})},__unbind:function(t,i){i&&i.unwatch&&n.each(this.__watchers__[t],function(t){t.subPath&&i.unwatch(t.subPath,t.handler,t.context)})},__notify:function(t){var i=this.get(t);n.each(this.__watchers__[t],function(t){t&&t.handler&&t.handler.call(t.context,n.path(i,t.subPath),t.fullPath,this)},this)}}})}(zn);